TDTPAD_extension v1.3, TheDoctor Team.

Сборка для Chrome: TDTPAD_extension_1V3.crx (либо папка \TDTPAD_extension1V3\)
Сборка для Firefox: TDTPAD_extension_1V3.xpi
Сборка для Opera: TDTPAD_extension_1V3.nex
Скрипт как UserJS: TDTPAD_extension1V3.js
Скрипт для браузера: TDTPAD_extension1V3.txt

Установка:

• Для оперы, хрома и мозиллы – перетащите соответствующий файл на вкладку расширений и разрешите установку. Также можно попробовать войти в «режим разработчика» в браузере, и «загрузить распакованное расширение» из папки «\TDTPAD_extension_1V3\».
• Новый Chrome может мутить с недоверенным источником, тогда найдите так называемый «режим разработчика» в менеджере расширений, и включите его. Потом «загрузите распакованное расширение», указав папку \TDTPAD_extension1V3\.
• Новый Firefox тоже может отказать в установке из недоверенного источника. Тогда вставьте в адресную строку «about:config», подтвердите, и наберите в поиске «xpinstall.signatures.required». Найдите это значение и пощёлкайте на него так, чтобы оно стало «false». Перезапустите браузер и повторите установку.
• Для использования скрипта как UserJS, скопируйте файл в папку с пользовательскими скриптами, однако в Opera<=12 (Presto/AC) работоспособность и эффективность не гарантируется, потому что сам пад там работает некорректно. UserJS также может быть установлен через расширение Tampermonkey.
• Для активации скрипта без установки, откройте консоль любого браузера (Ctrl+Shift+K/J) и вставьте его туда.

Когда вы зайдёте в пад на piratenpad.de, вы заметите кнопку «TDTPAD» вверху. Нажмите на неё, чтобы активировать расширение функционала пада; лучше сделать это лишь после того, как весь пад полностью прогрузится.
Далее вместо этой кнопки появится панель с дополнительными кнопочками, вот их назначение (справа налево) :

• SC: включение и отключение проверки орфографии в паде. Должно поддерживаться браузером (щёлкните правой кнопкой мыши в текст и посмотрите что-нибудь в контекстном меню). Если ваш браузер и сам проверяет орфографию в паде по выбору нужного пункта в контекстном меню – то кнопку SC можно держать выключенной.
• PN: включение и отключение публикации строки, на которой вы находитесь в паде. Те, у кого нет расширения – увидят номер как часть вашего ник-нейма; а пользователи с расширением смогут щёлкнуть на имя, чтобы быстро перейти к этой строке. Если при незапущенном расширении в вашем имени почему-то остался номер от прошлой сессии – можете просто стереть его вручную.
• HD: включение и отключение скрытия зачёркнутого текста в паде. Действует локально; вместо зачёркнутых кусков отображается серая вертикальная черта, а текст на текущей строке всегда видим полностью.

(предыдущие три опции запоминаются локально, и после перезагрузки пада сохранят свои состояния; первые две включены по умолчанию для новых падов)

• MY: включение и отключение временной подсветки своего цвета – текст локально отобразится белым на чёрном фоне. Действует локально, для каждого только на свой цвет. Цвета остальных участников получат полную яркость, а при наведении на текст будет показываться подсказка с именем автора. Чтобы оставить только яркость всех цветов, не вызывая подсказки и не зачерняя свой – нажмите кнопку с зажатой клавишей Ctrl. Если вы или кто-то другой сменит свой цвет, отмените и активируйте этот режим снова.
• FS: переход в полноэкранный режим и обратно, пад растягивается по вертикали. Желательно предварительно воспользоваться стандартным полноэкранным режимом самого пада (для растягивания по горизонтали).
• CM: раскрытие и закрытие окна скрипта, который позволяет проверить текст на повторяющиеся слова. Предварительно нужно скопировать из пада участок текста, чтобы сразу вставить сюда, потому что окно закрывает собой весь пад.
• NT: изменение уровня оповещений для приходящих из чата сообщений.
• TR: отображение и скрытие панели для поиска и перевода текста. Там есть текстовое поле, в которое можно написать английское слово или фразу; и несколько кнопок, позволяющих открыть в новом окне сайты различных словарей с его поиском.
• JP: переход к определённой строке в паде: если где-то в тексте выделен номер строки – то переход произойдёт к этой строке; иначе будет просто центрирована текущая строка с курсором. Однако, если в поле поиска и перевода TR находится число – оно будет использовано как номер, и удалено. Также, в этом поле можно просто нажать Enter, если в нём только число.

Также на панели справа от кнопочек будет появляться значок «@» каждый раз, когда изменения в паде отправляются на сервер. Он пропадает, когда придёт ответ сервера о том, что всё сохранено.

Закладки:

• Для добавления закладки на строку – щёлкните на номер этой строки. Для удаления – ещё раз.
• Все текущие закладки отображаются на маленькой панели снизу, по ним можно щёлкать для перехода, или навести мышку – во всплывающей подсказке будет показан текст закладки.
• Поставленные в паде закладки сохраняются локально, и будут восстановлены после перезагрузки пада.
• Чтобы очистить все закладки, щёлкните по нижней панели с зажатой клавишей Ctrl и подтвердите.

Улучшение чата:

• Все числа, встретившиеся в тексте любого сообщения в чате – считаются номерами строк, если не находятся внутри слова и не являются частью гиперссылки. Они выделяются жирным, и по ним можно кликать для перехода к этим строкам в паде.
• Если другой участник при отправке сообщения активировал расширение и включил режим «PN» публикации номера своей текущей строки – то его имя выделится подчёркнутым, и щелчком по нему можно перейти к той строке, на которой он находился в момент написания сообщения; а при наведении отобразится и сам номер.
• Приходящие сообщения будут дублироваться в виде оповещений, если выбран достаточный уровень NT. Простые сообщения отображаются голубым цветом. Важными сообщениями считаются те, в которых встречаются числа – номера строк, они отображаются жёлтым. Личные сообщения должны либо начинаться с символа «!» (длиной не менее 4), либо содержать текущий ник-нейм в тексте, они выделяются розовым.
• Оповещения приходят очередью, её размер показывается в заголовке окна и на кнопке справа. Нажатие на неё закрывает одно оповещение, а щелчок с зажатой клавишей Ctrl закроет сразу все пришедшие оповещения.
• В окне оповещений можно ответить, для этого щёлкните по квадратику с цветом участника слева. Повторный щелчок вставит его имя в поле (для отправки сообщения с «личным» уведомлением).
• Также имя участника вставляет в стандартное поле отправки щелчок с зажатым Ctrl по любому сообщению в чате, либо по иконке его цвета в списке выше.

Улучшение списка пользователей:

• Если кто-то включил у себя публикацию текущей строки, то его имя будет состоять из самого ник-нейма и номера строки, на которой он находится. Всё это будет подчёркнуто, и нажатием можно перейти к этой строке в паде.
• Более того, напротив таких строк слева от нумерации появится небольшая чёрточка-маркер цвета этого пользователя, для того, чтобы было видно, на какой он строке; «свой» маркер не ставится.
• При наведении указателя на чёрточку будет показано и имя этого участника. Если на одной строке окажутся несколько человек – их маркеры встанут рядом.
• Расстановка и обновление маркеров происходит в момент, когда кто-либо перейдёт на другую строку; если маркеры вдруг оказались на неправильных позициях, то можно нажать кнопку «JP» перехода к строке (даже без выделения номера, на текущую), чтобы обновить все маркеры принудительно.

Панель инструментов:

• Стандартная панель инструментов русифицируется после активации расширения в паде.
• Кнопка зачёркивания текста получает комбинацию клавиш Ctrl+S, и по идее это не должно вызывать попыток «сохранить страницу» в браузере, если фокус находится в тексте пада.
• Кнопка выбеливания текста вызывается комбинацией Ctrl+D, но только если хоть что-то в паде было выделено. Снимает выделение с текста.
• Кнопка сохранения ревизии, и поле-список с выбором языка – скрываются. Для сохранения ревизии теперь можно воспользоваться меню со списком ревизий в верхней панели, а для смены языка придётся обновить страницу.
• Есть возможность временно взять себе белый цвет, для этого зажмите Ctrl и щёлкните по квадрату с выбором своего цвета. Для восстановления цвета просто выберите его ещё раз.

Примечания:

• Орфография только что написанного проверяется не сразу, а спустя примерно секунду после последнего действия (щелчка мышью или отпускания клавиши), как и «PN» публикация позиции; проверяются преимущественно те строки, на которых курсор был хоть раз после включения проверки «SC».
• Панель переводчика «TR» содержит кнопки для поиска в гугле, мультитране, викисловаре, гугль-переводчике, контекстном словаре, словаре «коллинс», урбане, и яндекс-переводчике; нажатие Enter в поле запускает поиск в google по умолчанию.
• Режим «HD» скрытия зачёркнутого не позволяет поставить курсор на полностью вычеркнутую строку, для этого придётся временно отключить его.
• В окне «CM» поиска повторяющихся слов, по умолчанию отмечено игнорирование всех букв кроме русских, что позволяет проверять отрывки текста кусками вместе с транскриптом.
• Приходящие сообщения в чате и обработка номеров строк в именах может происходить не сразу, но задержка будет не больше секунды.
• Расширение не позволяет всплывающим окошкам об ошибках оставаться прозрачными на экране и блокировать взаимодействие с частью пада.
• Кнопка перехода «JP» сначала проверяет текст, выделенный в паде; если там нет числа, то проверяется выделенный текст в чате. Если числа нет и там, то происходит переход на текущую строку и её центрация. Вернее, первей всего проверяется поле поиска…

Советы по использованию:

• Включите проверку орфографии, лишней никогда не будет. Попробуйте деактивировать английские словари в браузере, чтобы транскрипт не проверялся.
• Публикуйте свою позицию в паде, если активно редактируете его – чтобы другие могли видеть, где вы находитесь.
• Когда пишите в чат о какой-либо фразе, поставьте на неё курсор. Тогда, можете не указывать в сообщении номер строки, ведь если публикация позиции включена, то номер строки отправится автоматически (и останется таким в сообщении навсегда).
• Для абсолютно полноэкранного режима: сначала нажмите «Full screen» в углу пада, затем кнопку из расширения (не наоборот, ведь первая была бы скрыта), и наконец – полноэкранный режим браузера (F11).
• Когда вас куда-то зовут в чате – поставьте закладу на текущую строку, чтобы потом быстро к ней вернуться. Также и при сбоях пада: не обновляйтесь сразу, а сначала скройте окно ошибки и поставьте закладку на свою строчку.
• Если вам кажется, что какое-то слово повторяется слишком часто в отрывке текста – воспользуйтесь окошком подсчёта повторяющихся слов. Вполне возможно, что повторяется ещё что-нибудь.
• На панели переводчика не обязательно вводить запрос в поле, можно просто нажать любую из кнопок, чтобы перейти на целевой сайт и искать можно будет уже непосредственно на нём.
• Чтобы перейти на строку, номер которой написан в самом паде – выделите его и нажмите кнопку перехода JP.
• Когда вы копируете текст из другого пада или истории, перед вставкой возьмите себе белый цвет – тогда копируемый белый тоже останется белым.
• Если вы включите максимальный уровень оповещений, то можете полностью свернуть чат, и ничего не пропустите. Для уведомления даже тех, у кого уровень оповещений минимален, начните своё сообщение с восклицательного знака.

Список изменений третьей версии:

• включение режима MY с зажатым Ctrl позволяет в паде видеть яркими цвета всех вышедших участников, но не показывать свой чёрным и не отображать подсказки авторства, как было при простом активировании; при смене своего цвета, режим придётся перезапустить.
• после имён в чате длинные строки теперь могут переноситься – как и обычно.
• в Firefox список закладок на номера строк стал правильно работать – панелька внизу.
• панель с переводом и поиском больше не сдвигает пад вниз, не перегораживает прокрутку, и не скрывает панельку закладок.
• нажатие Enter в поле на панели перевода и поиска, если в нём единственное число – номер строки – действует как щелчок по JP, то есть переходит на строку.
• выделение найденных номеров в сообщениях чата больше не ломает там гиперссылки.
• режим скрытия зачёркнутого текста отныне корректно обрабатывает «списки» в паде, даже вложенные.
• количество непрочитанных уведомлений, отображаемое в заголовке окна – наконец пропадает после их прочтения.
• всплывающее меню на кнопке уведомлений теперь не сразу пропадает, если по нему был щелчок. В мозилле строчка идёт немного ниже кнопок, но теперь это не мешает.
• режимы проверки орфографии и публикации своей позиции будут по умолчанию включены для новых падов.
• исправлена ошибка, из-за которой оповещения могли не работать, если имя одного участника совпадает с частью имени другого.
• названия режимов оповещений сделаны чуть яснее.

//EOF